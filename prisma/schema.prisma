generator client {
  provider = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "sqlite"
}

model Box {
  id          String    @id
  name        String
  description String?
  count       Int       @default(0)
  totalValue  Float     @default(0)
  currency    String?
  createdAt   DateTime
  updatedAt   DateTime
  
  // Relations
  sadaqahs    Sadaqah[]
  collections Collection[]
  
  @@index([createdAt])
}

model Sadaqah {
  id        String    @id
  boxId     String
  value     Float
  currency  String
  createdAt DateTime
  location  String?
  ipAddress String?
  userAgent String?
  
  // Relation
  box       Box       @relation(fields: [boxId], references: [id], onDelete: Cascade)
  
  @@index([boxId])
  @@index([createdAt])
}

model Collection {
  id             String   @id
  boxId          String
  emptiedAt      DateTime
  sadaqahsCollected Int
  totalValue     Float
  currency       String
  
  // Relation
  box            Box      @relation(fields: [boxId], references: [id], onDelete: Cascade)
  
  @@index([boxId])
  @@index([emptiedAt])
}
